<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒ€ìê¸° íš¨ê³¼ ê²Œì„ë¶</title>
    <style>
        /* ----------------------------------------------------
           CSS íŒŒì¼ êµ¬ì„±
        ---------------------------------------------------- */
        /*
          1. ì›¹ í°íŠ¸ ì„¤ì •
          2. ì „ì—­ ìŠ¤íƒ€ì¼ (body)
          3. ë ˆì´ì•„ì›ƒ ë° ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼
          4. ë°˜ì‘í˜• ë””ìì¸ (ë¯¸ë””ì–´ ì¿¼ë¦¬)
        */

        /* ----------------------------------------------------
          1. ì›¹ í°íŠ¸ ì„¤ì •
          'Koddi UD OnGothic' í°íŠ¸ë¥¼ ë¡œë“œí•˜ê³ , ëª¨ë“  í˜ì´ì§€ì— ì ìš©í•©ë‹ˆë‹¤.
        ---------------------------------------------------- */
        @font-face {
            font-family: 'Koddi UD OnGothic';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/KoddiUDOnGothic-Regular.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --font-family: 'Koddi UD OnGothic', sans-serif;
        }

        /* ----------------------------------------------------
          2. ì „ì—­ ìŠ¤íƒ€ì¼ (body)
          ì „ì²´ í˜ì´ì§€ì˜ ë°°ê²½, ê¸€ê¼´, ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•©ë‹ˆë‹¤.
        ---------------------------------------------------- */
        * {
            font-family: var(--font-family); /* ëª¨ë“  ìš”ì†Œì— í°íŠ¸ ê°•ì œ ì ìš© */
        }
        body {
            background-color: #2b2b2b;
            color: #d1d1d1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        /* ----------------------------------------------------
          3. ë ˆì´ì•„ì›ƒ ë° ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼
          ê²Œì„ë¶ì˜ ê° ìš”ì†Œ(ì»¨í…Œì´ë„ˆ, ì´ë¯¸ì§€, í…ìŠ¤íŠ¸, ë²„íŠ¼)ì˜ ë””ìì¸ì„ ì •ì˜í•©ë‹ˆë‹¤.
        ---------------------------------------------------- */
        .game-container {
            width: 1600px;
            background-color: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            padding: 2rem;
            display: none;
            flex-direction: column;
            gap: 1.5rem;
        }

        .image-container {
            width: 100%;
            /* 16:9 ë¹„ìœ¨ ìœ ì§€ */
            aspect-ratio: 16 / 9;
            border-radius: 8px;
            background-color: #333;
            overflow: hidden;
            border: 2px solid #555;
            transition: background-image 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .story-text {
            font-size: 1.5rem;
            line-height: 1.6;
            min-height: 120px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            padding-right: 15px;
        }

        .story-text::-webkit-scrollbar {
            width: 8px;
        }
        .story-text::-webkit-scrollbar-thumb {
            background-color: #555;
            border-radius: 4px;
        }
        .story-text::-webkit-scrollbar-track {
            background-color: #1e1e1e;
        }

        .typing-cursor {
            font-weight: bold;
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            from, to { color: transparent; }
            50% { color: #d1d1d1; }
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            min-height: 150px;
            width: 33.333%;
            margin: 0 auto;
        }

        .option-button {
            background-color: #4a4a4a;
            color: #ffffff;
            font-size: 1.25rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s, background-color 0.2s;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .option-button:hover {
            background-color: #636363;
            transform: translateY(-2px);
        }

        .option-button:active {
            transform: translateY(0);
        }

        #start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        /* ----------------------------------------------------
          4. ë°˜ì‘í˜• ë””ìì¸ (ë¯¸ë””ì–´ ì¿¼ë¦¬)
          í™”ë©´ í¬ê¸°ì— ë”°ë¼ ë ˆì´ì•„ì›ƒì„ ì¡°ì ˆí•©ë‹ˆë‹¤.
        ---------------------------------------------------- */
        @media (max-width: 1600px) {
            .game-container {
                width: 95%;
                max-width: 1600px;
            }
        }
        @media (max-width: 640px) {
            .game-container {
                padding: 1.5rem;
                width: 95%;
                max-width: 800px;
            }
            .image-container {
                height: auto;
                aspect-ratio: 16 / 9;
            }
            .story-text {
                font-size: 1.2rem;
            }
            .options-container {
                width: 95%;
            }
            .option-button {
                font-size: 1rem;
                padding: 0.6rem 1.2rem;
            }
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1>ê²Œì„ë¶ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
        <p>ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        <button id="startButton" class="option-button">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="game-content" class="game-container">
        <div id="imageContainer" class="image-container"></div>
        <div id="storyText" class="story-text"></div>
        <div id="optionsContainer" class="options-container"></div>
    </div>

    <!-- ê²Œì„ ë°ì´í„° í…œí”Œë¦¿ -->
    <template id="start">
        <div class="page-data" data-image="https://placehold.co/1600x900/34495e/ffffff?text=ì–´ë‘ìš´+ìˆ²+ì†">
            <p>ë‹¹ì‹ ì€ ì–´ë‘ìš´ ìˆ² ì†ì—ì„œ ëˆˆì„ ë–´ìŠµë‹ˆë‹¤. ê°ˆë¦¼ê¸¸ì´ ë‚˜íƒ€ë‚¬ëŠ”ë°, ì–´ëŠ ìª½ìœ¼ë¡œ ê°€ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="options">
                <button data-next="page2">ì™¼ìª½ ê¸¸ë¡œ ê°„ë‹¤</button>
                <button data-next="page3">ì˜¤ë¥¸ìª½ ê¸¸ë¡œ ê°„ë‹¤</button>
            </div>
        </div>
    </template>

    <template id="page2">
        <div class="page-data" data-image="https://placehold.co/1600x900/2c3e50/ffffff?text=ë‚¡ì€+ì˜¤ë‘ë§‰">
            <p>ë‹¹ì‹ ì€ ì™¼ìª½ ê¸¸ì„ íƒí–ˆê³ , ê¸¸ì€ ì ì  ë” ì–´ë‘ì›Œì§‘ë‹ˆë‹¤. ê°‘ìê¸° ë‚¡ì€ ì˜¤ë‘ë§‰ì´ ëˆˆì— ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. ì˜¤ë‘ë§‰ì— ë“¤ì–´ê°€ ë³´ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="options">
                <button data-next="page4">ì˜¤ë‘ë§‰ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤</button>
                <button data-next="page5">ì˜¤ë‘ë§‰ì„ ì§€ë‚˜ ê³„ì† ê±·ëŠ”ë‹¤</button>
            </div>
        </div>
    </template>

    <template id="page3">
        <div class="page-data" data-image="https://placehold.co/1600x900/27ae60/ffffff?text=ë¹›ë‚˜ëŠ”+ìˆ²">
            <p>ë‹¹ì‹ ì€ ì˜¤ë¥¸ìª½ ê¸¸ì„ íƒí–ˆê³ , ê¸¸ì€ ë¹›ìœ¼ë¡œ ê°€ë“í•©ë‹ˆë‹¤. ë©€ë¦¬ì„œ ë°˜ì§ì´ëŠ” ë³´ë¬¼ ìƒìê°€ ë³´ì…ë‹ˆë‹¤. ë‹¤ê°€ê°€ ë³´ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="options">
                <button data-next="end_treasure">ë³´ë¬¼ ìƒì ìª½ìœ¼ë¡œ ê°„ë‹¤</button>
                <button data-next="end_safe">ë‹¤ë¥¸ ê¸¸ì„ ì°¾ì•„ë³¸ë‹¤</button>
            </div>
        </div>
    </template>

    <template id="page4">
        <div class="page-data" data-image="https://placehold.co/1600x900/8e44ad/ffffff?text=ë§ˆë²•ì„œ">
            <p>ë‚¡ì€ ì˜¤ë‘ë§‰ ì•ˆìœ¼ë¡œ ë“¤ì–´ì„œì, ì˜¤ë˜ëœ ë§ˆë²•ì„œê°€ ë³´ì…ë‹ˆë‹¤. ë§ˆë²•ì„œë¥¼ í¼ì³ë³´ë‹ˆ ê°•ë ¥í•œ ë§ˆë²•ì„ ë°°ìš°ê²Œ ë˜ì–´ ë‹¹ì‹ ì˜ ëª¨í—˜ì€ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ìŠµë‹ˆë‹¤! ğŸ‰</p>
            <div class="options">
                <button data-next="start">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </template>

    <template id="page5">
        <div class="page-data" data-image="https://placehold.co/1600x900/c0392b/ffffff?text=ë‚­ë– ëŸ¬ì§€">
            <p>ì˜¤ë‘ë§‰ì„ ì§€ë‚˜ ê³„ì† ê±¸ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸¸ì€ ë‚­ë– ëŸ¬ì§€ë¡œ ì´ì–´ì ¸ ìˆì—ˆê³ , ë‹¹ì‹ ì€ ë°œì„ í—›ë””ëŒ ëª¨í—˜ì„ ëë‚´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ’€</p>
            <div class="options">
                <button data-next="start">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </template>

    <template id="end_treasure">
        <div class="page-data" data-image="https://placehold.co/1600x900/f1c40f/ffffff?text=í™©ê¸ˆ+ì—´ì‡ ">
            <p>ë³´ë¬¼ ìƒìë¥¼ ì—´ì, ìƒì ì•ˆì—ëŠ” ë¹›ë‚˜ëŠ” í™©ê¸ˆ ì—´ì‡ ê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤. ì´ ì—´ì‡ ëŠ” ë‹¹ì‹ ì˜ ì§‘ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ë¬¸ì„ ì—´ì–´ì¤ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì•ˆì „í•˜ê²Œ ì§‘ìœ¼ë¡œ ëŒì•„ì™”ìŠµë‹ˆë‹¤! ğŸ¡</p>
            <div class="options">
                <button data-next="start">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </template>

    <template id="end_safe">
        <div class="page-data" data-image="https://placehold.co/1600x900/3498db/ffffff?text=í‰í™”ë¡œìš´+ë§ˆì„">
            <p>ë¹›ë‚˜ëŠ” ìƒìë¥¼ ë¬´ì‹œí•˜ê³  ë‹¤ë¥¸ ê¸¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ê¸¸ì€ ì•ˆì „í•œ ë§ˆì„ë¡œ ì´ì–´ì¡Œê³ , ë‹¹ì‹ ì€ ë”°ëœ»í•œ í™˜ì˜ì„ ë°›ìœ¼ë©° ìƒˆë¡œìš´ ì‚¶ì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜Š</p>
            <div class="options">
                <button data-next="start">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </template>

    <script>
        // JavaScript íŒŒì¼ êµ¬ì„±:
        // 1. ì „ì—­ ë³€ìˆ˜ ë° DOM ìš”ì†Œ ìºì‹±
        // 2. ê²Œì„ ì‹œì‘ ë° í˜ì´ì§€ ì´ˆê¸°í™” í•¨ìˆ˜ (initGame)
        // 3. íƒ€ìê¸° íš¨ê³¼ í•¨ìˆ˜ (typewriterEffect)
        // 4. í˜ì´ì§€ ì „í™˜ ë° ì½˜í…ì¸  í‘œì‹œ í•¨ìˆ˜ (showPage)
        // 5. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •

        // ì „ì—­ ë³€ìˆ˜ ë° DOM ìš”ì†Œ ìºì‹±
        const storyTextElement = document.getElementById('storyText');
        const optionsContainerElement = document.getElementById('optionsContainer');
        const imageContainerElement = document.getElementById('imageContainer');
        const startScreenElement = document.getElementById('start-screen');
        const gameContentElement = document.getElementById('game-content');
        let typingInterval;

        // íƒ€ìê¸° ì†Œë¦¬ íŒŒì¼ ê²½ë¡œ
        const typewriterSound = "./typewriter-1.mp3";
        let sound;

        // ê²Œì„ ì‹œì‘ì„ ìœ„í•œ ì´ˆê¸°í™” í•¨ìˆ˜
        // ì‚¬ìš©ìì˜ ì²« ìƒí˜¸ì‘ìš© í›„ í˜¸ì¶œë˜ì–´ ì†Œë¦¬ ì¬ìƒ ê¶Œí•œì„ ì–»ê³  ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.
        function initGame() {
            // ì˜¤ë””ì˜¤ ê°ì²´ ìƒì„±
            sound = new Audio(typewriterSound);

            // ì‹œì‘ í™”ë©´ì„ ìˆ¨ê¸°ê³  ê²Œì„ í™”ë©´ì„ í‘œì‹œí•©ë‹ˆë‹¤.
            startScreenElement.style.display = 'none';
            gameContentElement.style.display = 'flex';

            // ì²« í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
            showPage('start');
        }

        // íƒ€ìê¸° íš¨ê³¼ë¥¼ êµ¬í˜„í•˜ëŠ” í•¨ìˆ˜
        // ê¸€ìë¥¼ í•œ ê¸€ìì”© í‘œì‹œí•˜ê³ , ì™„ë£Œë˜ë©´ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
        function typewriterEffect(text, onComplete) {
            let i = 0;
            storyTextElement.innerHTML = '';
            clearInterval(typingInterval);

            // ì†Œë¦¬ ì¬ìƒ ì„¤ì •
            if (sound) {
                sound.pause();
                sound.currentTime = 0; // ì†Œë¦¬ë¥¼ ì²˜ìŒìœ¼ë¡œ ë˜ê°ê¸°
                sound.volume = 0.5;
                sound.play().catch(e => console.error("Sound playback failed:", e));
            }

            typingInterval = setInterval(() => {
                if (i < text.length) {
                    // ê¸€ìë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•˜ê³  ì»¤ì„œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
                    storyTextElement.innerHTML += text.charAt(i);
                    storyTextElement.innerHTML += '<span class="typing-cursor">|</span>';
                    i++;
                    // ì´ì „ ì»¤ì„œë¥¼ ì œê±°í•˜ì—¬ ê¹œë°•ì´ëŠ” íš¨ê³¼ë¥¼ ë§Œë“­ë‹ˆë‹¤.
                    if (i > 0) {
                        const cursor = storyTextElement.querySelector('.typing-cursor');
                        if (cursor) {
                            cursor.remove();
                        }
                    }
                } else {
                    // ëª¨ë“  ê¸€ìê°€ í‘œì‹œë˜ë©´ íƒ€ì´ë¨¸ì™€ ì†Œë¦¬ë¥¼ ì •ì§€í•©ë‹ˆë‹¤.
                    clearInterval(typingInterval);
                    if (sound) {
                        sound.pause();
                    }
                    // í…ìŠ¤íŠ¸ í‘œì‹œê°€ ì™„ë£Œëœ í›„ ì‹¤í–‰í•  í•¨ìˆ˜ í˜¸ì¶œ
                    onComplete();
                }
            }, 50); // íƒ€ì´í•‘ ì†ë„ (ë°€ë¦¬ì´ˆ)
        }

        // íŠ¹ì • í˜ì´ì§€ì˜ ë‚´ìš©ì„ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        // HTML í…œí”Œë¦¿ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ í™”ë©´ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
        function showPage(pageId) {
            const template = document.getElementById(pageId);
            if (!template) {
                console.error(`Error: Template with ID '${pageId}' not found.`);
                return;
            }

            // í…œí”Œë¦¿ ì½˜í…ì¸  ë³µì œ ë° ë°ì´í„° ì¶”ì¶œ
            const pageDataElement = template.content.cloneNode(true).querySelector('.page-data');
            const textContent = pageDataElement.querySelector('p').textContent;
            const imageUrl = pageDataElement.dataset.image;

            // ì´ì „ ì„ íƒì§€ ì œê±°
            optionsContainerElement.innerHTML = '';

            // ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
            imageContainerElement.style.backgroundImage = `url('${imageUrl}')`;

            // í…ìŠ¤íŠ¸ì— íƒ€ìê¸° íš¨ê³¼ ì ìš©
            typewriterEffect(textContent, () => {
                // í…ìŠ¤íŠ¸ í‘œì‹œê°€ ì™„ë£Œë˜ë©´ ì„ íƒì§€ ë²„íŠ¼ì„ ìƒì„±í•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.
                const options = pageDataElement.querySelectorAll('.options button');
                if (options.length > 0) {
                    options.forEach(option => {
                        const button = document.createElement('button');
                        button.textContent = option.textContent;
                        button.className = 'option-button';
                        const nextId = option.dataset.next;
                        // ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ë„ë¡ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                        button.onclick = () => showPage(nextId);
                        optionsContainerElement.appendChild(button);
                    });
                }
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ "ê²Œì„ ì‹œì‘í•˜ê¸°" ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        // ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê²Œì„ì´ ì‹œì‘ë©ë‹ˆë‹¤.
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('startButton').onclick = initGame;
        });
    </script>
</body>
</html>
